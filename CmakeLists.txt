cmake_minimum_required(VERSION 3.27.7)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
project(weather C)
add_executable(${PROJECT_NAME} main.c server.c json_parser.c)

add_library(jsonParser STATIC json_parser.c)
add_library(server STATIC server.c)
find_package(cjson REQUIRED)
target_link_libraries(jsonParser PUBLIC cjson)

# Locate OpenSSL on the system
find_package(OpenSSL REQUIRED)

# Include OpenSSL headers
include_directories(${OPENSSL_INCLUDE_DIR})

# Link OpenSSL and your static libraries to the target
target_link_libraries(${PROJECT_NAME} PRIVATE jsonParser server ${OPENSSL_LIBRARIES})
