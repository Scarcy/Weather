cmake_minimum_required(VERSION 3.27.7)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
project(weather C)
add_executable(${PROJECT_NAME} main.c server.c)

add_library(jsonParser STATIC json_parser.c)
add_library(server STATIC server.c)
find_package(cjson REQUIRED)
target_link_libraries(jsonParser PUBLIC cjson)


# Locate OpenSSL on the system
find_package(OpenSSL REQUIRED)

# If not found, you can set it manually
if(NOT OPENSSL_FOUND)
    message(FATAL_ERROR "OpenSSL not found!")
    set(OPENSSL_ROOT_DIR "/usr/local/opt/openssl")
    set(OPENSSL_LIBRARIES "/usr/local/opt/openssl/lib")
    set(OPENSSL_INCLUDE_DIR "/usr/local/opt/openssl/include")
endif()

# Include OpenSSL headers
include_directories(${OPENSSL_INCLUDE_DIR})

# Link OpenSSL to the target (replace 'your_target' with your actual target name)
target_link_libraries(${PROJECT_NAME} PRIVATE jsonParser PUBLIC ${OPENSSL_LIBRARIES})
